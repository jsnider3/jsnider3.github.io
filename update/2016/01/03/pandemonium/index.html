<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Optimal Placement of Research Centers in Pandemic</title>
    <meta name="viewport" content="width=device-width initial-scale=1">
    <meta name="description" content="An attempt at a blog by someone who thinks Haskell is cool.">
    <link rel="canonical" href="http://www.joshuasnider.com/update/2016/01/03/pandemonium/">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

</head>

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61510914-1', 'auto');
  ga('send', 'pageview');

</script>



    <body>

    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="/">(\x -> "Blog")</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        <a class="page-link" href="/"> Home </a>
        
          
          
        
          
          
            <a class="page-link" href="/about/">About</a>
          
        
          
          
        
          
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>Optimal Placement of Research Centers in Pandemic</h1>
    <p class="meta">Jan 3, 2016</p>
  </header>

  <article class="post-content">
  <p>Pandemic<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> is a great board game, where the players represent
agents of the Center for Disease Control and must work together
to stop four epidemics from growing out of control. Players
can build research centers which allow you to make cures for the
disease as well as allowing them to travel around the world faster.
The placement of these research centers is an important aspect of
the game’s strategy and I’ll introduce a set of placements which are
arguably optimal.</p>

<p><img src="/pictures/pandemicMap.jpg" alt="Base map" height="250px" width="500px" /></p>

<p>I would be remiss if I didn’t mention Matt Wigway’s
<a href="http://www.indicatrix.org/2014/03/26/overanalyzing-board-games-network-analysis-and-pandemic/">prior work</a>.
What he did was make a graph out of the cities and connections in Pandemic
and use NetworkX to find the centrality of each node. In layman’s terms,
a city’s centrality is how close it is to being the center of the universe.
With no other information, this is a good measure for determining which of
two cities would be better to put a research center in. My replicated
results<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup> are listed below from least to most central. As you
can see, there’s a very strong correlation between a node’s degree and
centrality. The correlation is 0.583671004341 with a very strong
p-value of 1.33442315419e-05.</p>

<table>
  <thead>
    <tr>
      <th>City</th>
      <th>Centrality</th>
      <th>Number of neighbors</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Santiago</td>
      <td>0.00617591510206</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Johannesburg</td>
      <td>0.0154561777473</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Buenos Aires</td>
      <td>0.0196818864023</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Kinshasa</td>
      <td>0.0200914664916</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Lagos</td>
      <td>0.024766083641</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Lima</td>
      <td>0.0268220512166</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Atlanta</td>
      <td>0.0376927493913</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Montreal</td>
      <td>0.0403328663271</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Sao Paulo</td>
      <td>0.0404324206688</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Washington</td>
      <td>0.040605310228</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Miami</td>
      <td>0.0434286084369</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Bogota</td>
      <td>0.0450454304557</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Khartoum</td>
      <td>0.0470339007238</td>
      <td>4</td>
    </tr>
    <tr>
      <td>New York</td>
      <td>0.054893868982</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Beijing</td>
      <td>0.0562359233579</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Osaka</td>
      <td>0.0643883117632</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Mexico City</td>
      <td>0.0652670776334</td>
      <td>5</td>
    </tr>
    <tr>
      <td>London</td>
      <td>0.0713602782106</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Essen</td>
      <td>0.0729454518182</td>
      <td>4</td>
    </tr>
    <tr>
      <td>St. Petersburg</td>
      <td>0.0743611538763</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Seoul</td>
      <td>0.0744572557682</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Milan</td>
      <td>0.0751050249634</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Chicago</td>
      <td>0.0796660803023</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Madrid</td>
      <td>0.0861026173003</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Los Angeles</td>
      <td>0.0884941819147</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Moscow</td>
      <td>0.0927410165533</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Paris</td>
      <td>0.0959706851301</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Tokyo</td>
      <td>0.097357620102</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Algiers</td>
      <td>0.111280721025</td>
      <td>4</td>
    </tr>
    <tr>
      <td>San Francisco</td>
      <td>0.114205406407</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Riyadh</td>
      <td>0.12406948652</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Sydney</td>
      <td>0.125195372161</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Cairo</td>
      <td>0.143952359177</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Istanbul</td>
      <td>0.157260443095</td>
      <td>6</td>
    </tr>
    <tr>
      <td>Shanghai</td>
      <td>0.169778595896</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Tehran</td>
      <td>0.171149983787</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Mumbai</td>
      <td>0.172742688198</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Taipei</td>
      <td>0.182284451256</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Baghdad</td>
      <td>0.185535295048</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Karachi</td>
      <td>0.209343941172</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Jakarta</td>
      <td>0.224753744083</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Manila</td>
      <td>0.230481804184</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Ho Chi Minh</td>
      <td>0.252286801422</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Delhi</td>
      <td>0.255684010981</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Kolkata</td>
      <td>0.272007607474</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Chennai</td>
      <td>0.28519763084</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Bangkok</td>
      <td>0.313436248643</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Hong Kong</td>
      <td>0.327022542843</td>
      <td>6</td>
    </tr>
  </tbody>
</table>

<p>However, what we’re interested in is a set of n cities that together
are the best places to put research centers, not a single best city.
As our constraints, we only care about sets of
size greater or equal to one and less than or equal to six as we don’t have
enough pieces to have more than six research centers and we are given a
mandatory free one in Atlanta.</p>

<p>How can we compare two proposed placements? The most intuitive measure for
me is the average distance from each city in the world to the nearest
research center. According to
<a href="http://math.stackexchange.com/q/1309646/">Stack Exchange</a>, this is
reducible to the problem of finding a dominating set which is known to
be NP-Hard. Fortunately, this problem (despite being NP-Complete) is
solvable in reasonable time for a problem as small as ours. Especially
when you cache the all-pairs shortest paths matrix.</p>

<p>Obviously, with only one research center the only possible placement is
Atlanta which is therefore optimal.</p>

<p>With two research centers the optimal solution is to pair Atlanta with
either Baghdad or Cairo.</p>

<p><img src="/pictures/pandemicMap2.jpg" alt="Two centers" height="250px" width="500px" /></p>

<p>With three research centers there’s one optimal solution with the mandatory
Atlanta, Hong Kong covering East Asia, and Cairo providing fast travel to Africa, Europe, and the Mideast.</p>

<p><img src="/pictures/pandemicMap3.jpg" alt="Three centers" height="250px" width="500px" /></p>

<p>With four research centers, we take the optimal solution for three, move
our Mideast center to Istanbul and put our fourth in Sao Paulo to cover
the southwest side of the globe.</p>

<p><img src="/pictures/pandemicMap4.jpg" alt="Four centers" height="250px" width="500px" /></p>

<p>With five research centers, we have seven equally good choices.
Each involves placing one in Atlanta, one in Europe, one in
South America, one in East Asia, and one in either the Middle East
or South Asia.</p>

<table>
  <thead>
    <tr>
      <th>North America</th>
      <th>Europe</th>
      <th>East Asia</th>
      <th>Mid east</th>
      <th>South America</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Atlanta</td>
      <td>Istanbul</td>
      <td>Shanghai</td>
      <td>Chennai</td>
      <td>Sao Paulo</td>
    </tr>
    <tr>
      <td>Atlanta</td>
      <td>Istanbul</td>
      <td>Hong Kong</td>
      <td>Delhi</td>
      <td>Sao Paulo</td>
    </tr>
    <tr>
      <td>Atlanta</td>
      <td>Istanbul</td>
      <td>Hong Kong</td>
      <td>Karachi</td>
      <td>Sao Paulo</td>
    </tr>
    <tr>
      <td>Atlanta</td>
      <td>Paris</td>
      <td>Hong Kong</td>
      <td>Baghdad</td>
      <td>Bogota</td>
    </tr>
    <tr>
      <td>Atlanta</td>
      <td>Paris</td>
      <td>Hong Kong</td>
      <td>Cairo</td>
      <td>Bogota</td>
    </tr>
    <tr>
      <td>Atlanta</td>
      <td>Essen</td>
      <td>Hong Kong</td>
      <td>Cairo</td>
      <td>Bogota</td>
    </tr>
    <tr>
      <td>Atlanta</td>
      <td>London</td>
      <td>Hong Kong</td>
      <td>Cairo</td>
      <td>Bogota</td>
    </tr>
  </tbody>
</table>

<p><img src="/pictures/pandemicMap5.jpg" alt="Five center example" height="250px" width="500px" /></p>

<p>Finally, with six research centers we can cover all corners of the
globe with Atlanta, Paris, Khartoum, Hong Kong, Karachi, Bogota.</p>

<p><img src="/pictures/pandemicMap6.jpg" alt="Six centers" height="250px" width="500px" /></p>

<p>Of course, it’s not possible for us to build a research center in
Cairo and then move it to Istanbul when that’s better for us. In fact,
unless one of the players is the operations expert it’s unlikely we
can build research stations in the optimal locations at will.<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>
What we want now is a ranking of which cities are the best for research
centers and a separation of them into regions where we understand that
it’s never a good deal to put two research centers in the same region.</p>

<p>The centrality measure previously discussed is a good judge of how good
building a research center in a city is, but let’s check our work by
counting how many times each city appears in the optimal placements.</p>

<table>
  <thead>
    <tr>
      <th>City</th>
      <th>Occurences</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Shanghai</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Chennai</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Delhi</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Khartoum</td>
      <td>1</td>
    </tr>
    <tr>
      <td>London</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Essen</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Baghdad</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Karachi</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Paris</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Istanbul</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Sao Paulo</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Bogota</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Cairo</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Hong Kong</td>
      <td>9</td>
    </tr>
    <tr>
      <td>Atlanta</td>
      <td>13</td>
    </tr>
  </tbody>
</table>

<p>The correlation between the number of occurences and the centrality
measure depends a lot on whether we include Atlanta. With it the
correlation rounds to 0.10 and is not statistically significant. Without
it the correlation jumps to 0.27 with a p-value of 0.07. The likely 
reason these measures aren’t better correlated is because a lot of the
most central cities are clustered together in Asia while optimal
placement is based on spreading out.</p>

<p>One way we can separate the world into regions is with a Voronoi
diagram where each research center in the optimal six center layout
is the center of a zone.<br />
<strong>Central Asia</strong>: Moscow, Delhi, Baghdad, Tehran, Karachi, Riyadh, Mumbai<br />
<strong>Europes</strong>: Istanbul, Paris, St. Petersburg, London, Algiers, Milan, Madrid,
  Essen<br />
<strong>Africa</strong>: Kinshasa, Johannesburg, Khartoum, Lagos, Cairo<br />
<strong>Latin America</strong>: Mexico City, Sao Paulo, Santiago, Buenos Aires, Lima,
  Bogota<br />
<strong>North America</strong>: Chicago, San Francisco, Los Angeles, Atlanta, Miami,
  Montreal, Washington, New York<br />
<strong>East Asia</strong>: Manila, Shanghai, Sydney, Kolkata, Chennai, Seoul, Bangkok,
  Taipei, Hong Kong, Ho Chi Minh, Tokyo, Jakarta, Beijing, Osaka</p>

<p>Of course, we’ve artificially constricted ourselves by always having
a research center in Atlanta. Is it possible to come to a better solution
by relaxing that requirement? What if we’ve already been forced to put
a research center in Santiago? Where should we put the rest of our
stations if we’ve already made suboptimal moves? These are the kinds of
questions that might be covered in the future. A useful app to make based
off this work would be a REST API that tells you the average distance
for the globe to the nearest research center of a given placement and then
a pretty web frontend that uses it.</p>

<hr />

<p><strong>Footnotes:</strong></p>

<div class="footnotes">
  <ol>
  <li id="fn:1"> The Pandemic board game is copyright by Z-Man Games. <a href="#fnref:1" rev="footnote">↩</a></li>
  <li id="fn:2"> I was actually planning to do the analysis he did, but after seeing he already did it, I expanded it to this. <a href="#fnref:2" rev="footnote">↩</a></li>
  <li id="fn:3"> It's also common to have scenarios where you want to build a research center somewhere so that you can cure a disease as soon as possible. For example, on the day I decided to write this blog post we had our medic fly down to Lima and build a research station there because another player went down to Santiago to cure some disease and happened to draw the cards needed to make a cure. <a href="#fnref:3" rev="footnote">↩</a></li>
  </ol>
</div>

  <footer><small>Click <a href="https://github.com/jsnider3/jsnider3.github.io/issues/new">here</a>
  to suggest a topic through GitHub. If you don't have a GitHub, feel free to 
  <a href='mailto:josh@joshuasnider.com'>email me.</small></footer>

  </article>

  
    <div align="left">
    <a class="prev" href="/update/2015/11/10/take-notes/">&laquo; You're not Taking Enough Notes</a>
    </div>
  
  

</div>

      </div>
    </div>

    
<div id="disqus_thread" class="wrap"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'jsnider3';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


    <footer class="site-footer">

  <div class="wrap">

    <h2 class="footer-heading">(\x -> "Blog")</h2>

    <div class="footer-col-1 column">
      <ul>
        <li>(\x -> "Blog")</li>
        <li><a href="mailto:josh@joshuasnider.com">josh@joshuasnider.com</a></li>
      </ul>
    </div>

    <div class="footer-col-2 column">
      <ul>
        <li>
          <a href="https://github.com/jsnider3">
            <span class="icon github">
              <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                <path fill-rule="evenodd" clip-rule="evenodd" fill="#C2C2C2" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            <span class="username">jsnider3</span>
          </a>
        </li>
        <li>
          <script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
          <script type="IN/MemberProfile" data-id="https://www.linkedin.com/in/jsnider3" data-format="hover" data-related="false"></script>
        </li>
      </ul>
    </div>

    <div class="footer-col-3 column">
      <p class="text">An attempt at a blog by someone who thinks Haskell is cool.</p>
    </div>

  </div>

</footer>


    </body>
</html>
